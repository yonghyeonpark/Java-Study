# 자바 메모리 구조

![image](https://github.com/yonghyeonpark/Java-Study/assets/126778700/d473c663-9158-4fe7-8b11-ef63feee09e7)

## 메서드 영역

- 프로그램을 실행하는 데 필요한 공통 데이터를 관리하며, 이 영역은 프로그램의 모든 영역에서 공유합니다.
  - 클래스 정보 : `실행 코드`, `필드`, `메서드`와 `생성자` 코드 등 모든 실행 코드가 존재합니다.
  - `static` 영역
  - 런타임 상수 풀

## 스택 영역

- 스레드 수만큼 스택 영역이 생성되며, 각 스택 프레임은 `지역 변수`, 연산, 메서드 호출 정보 등을 포함합니다.
- 메서드를 호출할 때마다 하나의 스택 프레임이 쌓이고, 메서드가 종료되면 해당 스택 프레임이 제거됩니다.

## 힙 영역

- 객체(인스턴스)가 생성되는 영역이며, 가비지 컬렉션(GC)이 이루어지는 주요 영역으로, 더 이상 참조되지 않는 객체는 GC에 의해 제거됩니다.<br>(힙 영역 외부가 아닌, 힙 영역 내부에서만 인스턴스끼리 서로 참조하는 경우도 GC의 대상)

<br>

![image](https://github.com/yonghyeonpark/Java-Study/assets/126778700/56e865aa-4586-4add-9a03-845d0ca430eb)
<br>객체가 생성될 때, 인스턴스 변수에는 메모리가 할당되지만, 메서드에 대한 새로운 메모리 할당은 없습니다. 
메서드는 메서드 영역에서 공통으로 관리되고 실행됩니다.
<br>

# Static

## 멤버 변수

### 인스턴스 변수

- static이 붙지 않은 멤버 변수로, 인스턴스를 생성해야 사용할 수 있고, 인스턴스를 생성할 때마다 새로 만들어집니다.

### 클래스 변수

- 정적 변수, static 변수
- static이 붙은 멤버 변수로, 힙 영역이 아닌 메서드 영역에서 관리합니다.
- 자바 프로그램이 시작할 때, 딱 1개만 만들어지고, 인스턴스와 무관하게 클래스에 바로 접근해서 사용할 수 있습니다.

## 변수와 생명주기

### 지역 변수(매개변수 포함)

지역 변수는 스택 영역에 있는 스택 프레임 안에 보관됩니다. 메서드가 종료되면 스택 프레임도 제거되는데, 이때, 해당 스택 프레임에 포함된 지역 변수도 함께 제거됩니다.

### 인스턴스 변수

인스턴스 변수는 힙 영역을 사용하며, GC가 발생하기 전까지는 생존하기 때문에 보통 지역 변수보다 생존 주기가 깁니다.

### 클래스 변수

클래스 변수는 메서드 영역 중 static 영역에 보관되는 변수입니다. 메서드 영역은 프로그램 전체에서 사용하는 공용 공간이기 때문에, 해당 클래스가 JVM에 로딩되는 순간 생성되고, JVM이 종료될 때까지 생명주기가 이어집니다.

## 접근법

인스턴스를 통한 접근도 가능하지만, 명확하게 하기 위해 클래스를 통해 접근하는 것을 권장합니다.


## 멤버 메서드

### 인스턴스 메서드

- static이 붙지 않은 메서드

### 클래스 메서드

- 정적 메서드, static 메서드
- static이 붙은 멤버 메서드로, static이 붙은 정적 메서드나 정적 변수만 사용할 수 있습니다. 하지만 반대로, static이 붙지 않은 곳에서는 static을 호출할 수 있습니다.
- 메서드가 멤버 변수의 사용도 없고, 단순히 기능만 제공할 때, 정적 메서드로 만드는 것이 좋습니다. (유틸리티 성 메서드)

## 접근법

클래스 변수와 마찬가지로 클래스를 통해 접근하는 것이 더 명확합니다.